local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")
local player = Players.LocalPlayer

local ChangeSizeEvent = ReplicatedStorage:WaitForChild("ChangeSizeEvent")
local ShowPopupEvent = ReplicatedStorage:WaitForChild("ShowPopupEvent")

-- Create ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Parent = player:WaitForChild("PlayerGui")

-- Menu Frame
local frame = Instance.new("Frame")
frame.Size = UDim2.new(0, 350, 0, 400)
frame.Position = UDim2.new(0.5, -175, 0.3, -200)
frame.BackgroundColor3 = Color3.fromRGB(50,50,50)
frame.Parent = screenGui

-- Title
local title = Instance.new("TextLabel")
title.Size = UDim2.new(1, -20, 0, 50)
title.Position = UDim2.new(0, 10, 0, 10)
title.Text = "Choose Your Size"
title.TextScaled = true
title.Font = Enum.Font.SourceSansBold
title.TextColor3 = Color3.fromRGB(255,255,255)
title.BackgroundTransparency = 1
title.Parent = frame

-- Sizes
local sizes = {
    ["Small"] = 0.7,
    ["Normal"] = 1,
    ["Big"] = 1.5,
    ["Huge"] = 2
}

-- Create buttons
local yPos = 80
for name, scale in pairs(sizes) do
    local button = Instance.new("TextButton")
    button.Size = UDim2.new(0.8, 0, 0, 50)
    button.Position = UDim2.new(0.1, 0, 0, yPos)
    button.Text = name
    button.Font = Enum.Font.SourceSansBold
    button.TextScaled = true
    button.TextColor3 = Color3.fromRGB(255,255,255)
    button.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
    button.Parent = frame

    button.MouseButton1Click:Connect(function()
        ChangeSizeEvent:FireServer(scale)
        screenGui.Enabled = false
    end)

    yPos = yPos + 70
end

-- Optional: popup text for size change
local popupLabel = Instance.new("TextLabel")
popupLabel.Size = UDim2.new(0, 300, 0, 100)
popupLabel.Position = UDim2.new(0.5, -150, 0.2, 0)
popupLabel.TextScaled = true
popupLabel.BackgroundTransparency = 0.5
popupLabel.BackgroundColor3 = Color3.fromRGB(0,0,0)
popupLabel.TextColor3 = Color3.fromRGB(255,255,255)
popupLabel.Visible = false
popupLabel.Parent = screenGui

ShowPopupEvent.OnClientEvent:Connect(function(scale)
    popupLabel.Text = "Your size is now: " .. string.format("%.2f", scale)
    popupLabel.Visible = true
    task.delay(2, function()
        popupLabel.Visible = false
    end)
end)
